library(magrittr); 

1 %>% `-`() ; # [1] -1
1 %>% `-` ; # [1] -1

minus = \(x) \(y) x - y ;

1 %>% minus(2) ; # 2> Error in x(., 2) : unused argument (2)
1 %>% minus(2)() ; # [1] 1

1 %>% minus()(2) ; # 2> Error in x()(., 2) : unused argument (2)
1 %>% minus(.)(2) ; # 2> Error in x(.)(., 2) : unused argument (2)

(1 %>% minus(.))(2) ; # [1] -1
(1 %>% minus)(2) ; # [1] -1
magrittr::`%>%`(1,x)(2) ; # [1] -1

### ğŸ‘º magrittr çš„ %>% åªè®¤å³è¾¹å¯¹è±¡è¯­æ³•ä¸­çš„æœ€åä¸€ä¸ªå†™ç€çš„æ‹¬å·ã€‚
### ğŸ‘º ä¸€ä¸ªæ‹¬å·éƒ½æ²¡æœ‰çš„æ—¶å€™ï¼Œæ‰ä¼šè‡ªåŠ¨è¡¥ä¸€ä¸ª (.) ã€‚


### ğŸ‘º ä¸ 4.1.0 åæ–°å¢çš„ Native ç®¡é“å¯¹æ¯”

"aa" %>% paste ("bb") ; # [1] "aa bb"
"aa" |> paste ("bb") ; # [1] "aa bb"
"aa" %>% paste (.,"bb",.) ; # [1] "aa bb aa"
"aa" |> paste (_,"bb",_) ;
## 2> 
## Error in paste("_", "bb", "_") : 
##   pipe placeholder can only be used as a named argument (<input>:1:9)

"aa" %>% paste (...=.,"bb",...=.) ; # [1] "aa bb aa"
"aa" |> paste (...=_,"bb",...=_) ;
## 2> 
## Error in paste(... = "_", "bb", ... = "_") : 
##   pipe placeholder may only appear once (<input>:1:9)

"aa" %>% paste ("bb",...=.) ; # [1] "bb aa"
"aa" |> paste ("bb",...=_) ; # [1] "bb aa"

### ğŸ‘º magrittr ç®¡é“æä¾›çš„è¯­æ³•æ›´çµæ´»ï¼Œå†™æ³•ä¹Ÿæ›´å¤šã€‚
### ğŸ‘º Native ç®¡é“æä¾›çš„è¯­æ³•ä¸é‚£ä¹ˆçµæ´»ã€é™åˆ¶è¾ƒå¤šï¼ˆè¿™æœ‰æ—¶æ˜¯å¥½äº‹æœ‰æ—¶ä¸åˆ©äºç®€æ´ä»£ç ï¼‰ã€‚
### ğŸ‘º Native ç®¡é“æ˜¯ç›´æ¥è¢«è§£é‡Šä¸º lhs ä½äº rhs æœ€åä¸€ä¸ªæ‹¬å·çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå®Œå…¨é›¶æ€§èƒ½å½±å“ã€‚
### ğŸ‘º magrittr ç®¡é“æ˜¯ç”¨å‡½æ•°åœ¨ç¬¬ä¸‰æ–¹åº“å®ç°çš„ï¼Œå½“ç„¶è™½ä¸æ˜¯é›¶ä»£ä»·æŠ½è±¡ä½†ä»£ä»·ä¹Ÿæ²¡å¤šå°‘ã€‚
### ğŸ‘º magrittr ç®¡é“èº«ä¸Šæœ€å¤§çš„ä»£ä»·å…¶å®æ˜¯éœ€è¦å¼•å…¥ç¬¬ä¸‰æ–¹åº“ï¼Œ Native ç®¡é“å› è€Œåœ¨é¿å…å¼•å…¥åº“çš„åœºæ™¯ä¸‹ä¼šæ›´åŠ ä¼˜é›…ã€‚
### ğŸ‘º ä½†ç”±äºå†å²åŸå› ï¼Œ Native ç®¡é“æ˜¯åœ¨æ–°ç‰ˆæœ¬æ‰èƒ½ç”¨çš„ï¼Œä¸” magrittr ç®¡é“æä¸ºæˆç†Ÿï¼Œå› è€Œåè€…åè€Œä¼šåœ¨å¦ä¸€äº›å—é™åœºæ™¯èƒœå‡ºã€‚

### ğŸ‘º æ€»ä¹‹ï¼Œä¸¤è€…åŒºåˆ«ä¸æ˜¯å¤ªå¤§ï¼š
### ğŸ‘º - ä¸€ä¸ªçµæ´»ä¸€ä¸ªåˆ»æ¿ï¼Œå„æœ‰å„çš„å¥½å¤„ã€‚
### ğŸ‘º - ä¸€ä¸ªæ˜¯åº“ä¸€ä¸ªè¦æ–°ç‰ˆï¼Œå„æœ‰å„çš„ä¼˜åŠ¿åœºæ™¯ã€‚
### ğŸ‘º å¯æ ¹æ®éœ€è¦ä½¿ç”¨ã€‚æ¯”å¦‚ï¼š
### ğŸ‘º - æ— ç‰ˆæœ¬å¿…é¡»å¤šæ—§çš„é™åˆ¶ã€ä¸”è¦å°½é‡å°‘ä¾èµ–åœ°åˆ¶ä½œè‡ªå·±çš„åº“ï¼Œç”¨ Native ç®¡é“ã€‚
### ğŸ‘º - æ›´é’çä¸åˆ»æ¿å¸¦æ¥çš„ä¸¥è°¨æ€§ï¼Œç”¨ Native ç®¡é“ã€‚
### ğŸ‘º - ä»‹æ„ %>% è¿™ç§å†™æ³•è¿‡äºå®¹æ˜“è¢«è¦†ç›–å› è€Œä¸å¤Ÿä¸¥è°¨ï¼Œç”¨ Native ç®¡é“ï¼ˆ |> æ²¡é‚£ä¹ˆå®¹æ˜“è¢«è¦†ç›–ï¼Œä½† %>% å¯ä»¥è¢«å®šä¹‰ä¸ºä¸­å å‡½æ•°è€Œè¾¾åˆ°è¦†ç›–æ•ˆæœã€‚å¯ä»¥èµ‹å€¼ `%>%` ä¸º NA æ¥æ¢å¤ç¬¬ä¸‰æ–¹åº“è¯¥ç®¡é“çš„åŠŸèƒ½ï¼‰ã€‚
### ğŸ‘º - æ›´æ„¿æ„è®©ä»£ç ä¸å…·å¤‡è¯­è¨€ç‰¹è‰²ã€ä¹äºä¸å…¶ä»–è¯­è¨€ï¼ˆ OCaml, Elixir, ... ï¼‰çš„çº¦å®šä¹ æƒ¯ä¿æŒä¸€è‡´ï¼Œç”¨ Native ç®¡é“ã€‚
### ğŸ‘º - ä¸ä»‹æ„å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€é’ççµæ´»çš„è¯­æ³•ã€å¸Œæœ›å¯ä»¥æœ‰ç®€æ´ç¾è§‚çš„ä»£ç ã€æˆ–è€…æ›´å–œæ¬¢ç®€æ´æ˜ç¡®çš„é”™è¯¯æç¤ºï¼Œç”¨ magrittr ç®¡é“ï¼ˆæœ‰æ•´ä¸ªç³»åˆ—å“¦ï¼‰ã€‚





### ğŸ‘º %>% çš„ rhs æœ‰æ²¡æœ‰è¢«å¤§æ‹¬å·åŒ…è£¹æ•ˆæœæ˜¯ä¸åŒçš„ã€‚

1 %>% list(.+2,.*2,.-2,./2) |> identical (list(1,3,2,-1,0.5)) ; # [1] TRUE
1 %>% list(.,.+2,.*2,.-2,./2) |> identical (list(1,3,2,-1,0.5)) ; # [1] TRUE

### ğŸ‘º è¿™ä¸¤ä¸ªæ˜¯ä¸€å›äº‹ã€‚å› ä¸º . å ä½ç¬¦ï¼ˆ placeholder ï¼‰å…¨éƒ½æ˜¯åˆ«çš„å‡½æ•°çš„å‚æ•°ã€‚
### ğŸ‘º å³ï¼Œä½œä¸º rhs çš„ name çš„ list çš„æœ€åé¢ä¸€ä¸ªå‚æ•°åˆ—è¡¨æ‹¬å·æ²¡æœ‰ç›´æ¥ç”¨è¿‡å ä½ç¬¦ã€‚
### ğŸ‘º è¿™æ ·ä¸€æ¥å°±ä¼šè¢«å½“ä½œä½¿ç”¨äº†æ˜¯ä¸ç”¨å ä½ç¬¦çš„è¯­æ³•ï¼Œé‚£ä¹ˆï¼Œç®¡é“å°±ä¼šè‡ªè¡Œåœ¨è¯¥æœ€åä¸€ä¸ªå‚æ•°åˆ—è¡¨æ‹¬å·çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½ç½®æ·»åŠ å ä½ç¬¦ã€‚

### ğŸ‘º å¯ä»¥çœ‹ä¸‹é¢è¿™ä¸ªå¼å­çš„ç»“æœç›¸å½“äºä»€ä¹ˆã€‚
### ğŸ‘º å®ƒåœ¨ list å‡½æ•°çš„å‚æ•°åˆ—è¡¨ç›´æ¥ç”¨äº†èµ·ç ä¸€æ¬¡å ä½ç¬¦ï¼ˆè€Œä¸æ˜¯ç”¨ç»™åˆ«çš„å‡½æ•°çš„å‚æ•°åˆ—è¡¨ï¼‰ï¼Œå› è€Œå ä½ç¬¦æ²¡æœ‰è¢«éšå¼åœ°æ’åœ¨å¼€å¤´ã€‚

1 %>% list(.+2,.*2,.,.-2,./2) |> identical (list(3,2,1,-1,0.5)) ; # [1] TRUE

### ğŸ‘º å¦‚æœä½ ä¸å¸Œæœ›è¿™ç§éšå¼é€ æˆçš„ä¹±æï¼Œé‚£å°±åœ¨ä½ æ˜ç¡®æ— è®ºå¦‚ä½•ä¹Ÿä¸éœ€è¦è‡ªåŠ¨è¡¥å ä½ç¬¦åˆ°ç¬¬ä¸€ä¸ªå‚æ•°çš„æƒ…å†µä¸‹ï¼Œç”¨èŠ±æ‹¬å·ã€‚

1 %>% {list(.+2,.*2,.-2,./2)} |> identical (list(3,2,-1,0.5)) ; # [1] TRUE
1 %>% (\(z) list(z+2,z*2,z-2,z/2)) |> identical (list(3,2,-1,0.5)) ; # [1] TRUE

### ğŸ‘º æœ‰äº†èŠ±æ‹¬å·ï¼Œä¹Ÿå°±ç­‰åŒäºæ˜¯åƒè¿™æ ·å®šä¹‰äº†ä¸€ä¸ªé—­åŒ…ã€‚
### ğŸ‘º ç”±äº %>% æœ‰ä¸‹è¿°ç®€åŒ–è§„åˆ™ï¼Œåªå†™ä¸€ä¸ªå‡½æ•°åï¼ˆé—­åŒ…å¯¹è±¡ï¼‰å³ä¼šè¢«è‡ªåŠ¨è¡¥å……ç©ºæ‹¬å·ç„¶ååœ¨è¯¥æœ€æœ«æ‹¬å·è‡ªåŠ¨è¡¥å ä½ç¬¦ï¼Œ
### ğŸ‘º è¿™æ„å‘³ç€ä¸Šé¢å†™åœ¨ rhs ä½ç½®çš„é—­åŒ…å°±ä¼šè¢«ç«‹å³è°ƒç”¨ï¼Œè€Œç­‰ä»·è¿‡æ¥çš„èŠ±æ‹¬å·è¯­æ³•ä¹Ÿå°±åº”å½“æ˜¯åŒæ ·æ•ˆæœäº†ã€‚

1 %>% (\(z) list(z+2,z*2,z-2,z/2))(.) |> identical (list(3,2,-1,0.5)) ; # [1] TRUE
1 %>% (\(z) list(z+2,z*2,z-2,z/2))() |> identical (list(3,2,-1,0.5)) ; # [1] TRUE
1 %>% (\(z) list(z+2,z*2,z-2,z/2)) |> identical (list(3,2,-1,0.5)) ; # [1] TRUE

### ğŸ‘º è¿™æ˜¯æœ€åŸºæœ¬çš„ç®€åŒ–è§„åˆ™ï¼ˆæˆ–è€…è¯´éšå¼è‡ªåŠ¨è¡¥å…¨è§„åˆ™ï¼‰ã€‚

### ğŸ‘º æ›´å¤æ‚çš„ç»„åˆä¾‹å­ã€‚
### ğŸ‘º ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼Œå°±ç›¸å½“äºæ˜¯å¦ä¸€ç§æ„æ€äº†ã€‚

1 %>% {(\(z) list(z+2,z*2,z-2,z/2))} ; # \(z) list(z+2,z*2,z-2,z/2)
1 %>% (\(x)(\(z) list(z+2,z*2,z-2,z/2))) ; # \(z) list(z+2,z*2,z-2,z/2)

### ğŸ‘º è¿™ä¿©æ˜¯ä¸€å›äº‹ã€‚å› ä¸ºï¼š

1 %>% {(\(z) list(z+2,z*2,z-2,z/2))} %>% {.(3)} |> identical (list(3+2,3*2,3-2,3/2)) ; # [1] TRUE
1 %>% (\(x)(\(z) list(z+2,z*2,z-2,z/2))) %>% {.(3)} |> identical (list(3+2,3*2,3-2,3/2)) ; # [1] TRUE

### ğŸ‘º å¯ä»¥çœ‹åˆ°ï¼Œ 1 æ²¡æœ‰è¢«ä½œç”¨åˆ°ä»»ä½•åœ°æ–¹ï¼Œå…¶åŸå› åœ¨è¿™å—çš„ç¬¬äºŒè¡Œæ›´æ˜æ˜¾ã€‚
### ğŸ‘º æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯ 1 å’Œ 3 éƒ½è¢«ç”¨ä¸Šçš„ä¾‹å­ï¼š

1 %>% {(\(z) list(z+2,.*2,z-2,./2))} %>% {.(3)} |> identical (list(3+2,1*2,3-2,1/2)) ; # [1] TRUE
1 %>% (\(x)(\(z) list(z+2,x*2,z-2,x/2))) %>% {.(3)} |> identical (list(3+2,1*2,3-2,1/2)) ; # [1] TRUE

### ğŸ‘º ç”±äº a %>% b ç›¸å½“äº a %>% b(.) ï¼Œæ‰€ä»¥ 1 è¢«å¸¦å…¥ä¸Šé¢çš„ x ã€‚
### ğŸ‘º ç”±äº g %>% {.(3)} ç›¸å½“äº g %>% (\(f) f(3)) æˆ–è€… g %>% (\(f) f(3)) (.) ï¼Œ
### ğŸ‘º æ‰€ä»¥ 3 è¢«ä»£å…¥ç»™ä¸Šä¸€ä¸ªç®¡é“è¿”å›çš„é‚£ä¸ªé—­åŒ…é‡Œå»äº†ï¼Œè¿™ä¸ªé—­åŒ…çš„å‚æ•°å°±æ˜¯ z ã€‚

